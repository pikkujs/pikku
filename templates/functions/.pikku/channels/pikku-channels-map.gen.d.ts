/**
 * This file was generated by the @pikku/cli
 */
/**
 * This provides the structure needed for TypeScript to be aware of channels
 */

import type { __object } from '../../src/mcp.functions.js'

// Custom types are those that are defined directly within generics
// or are broken into simpler types
export type OnConnectInput = 'hello!'
export type AuthenticateInput = { token: string; userId: string }
export type AuthenticateOutput = { authResult: boolean; action: 'auth' }
export type SubscribeInput = { name: string }
export type UnsubscribeInput = { name: string }
export type EmitMessageInput = { name: string }
export type EmitMessageOutput =
  | { timestamp: string; from: string }
  | { message: string }
export type OnMessageInput = 'hello'
export type OnMessageOutput = 'hey'
export type ProgressiveEnhancementExampleOutput = {
  state: 'initial' | 'pending' | 'done'
}
export type TimeSinceOpenedOutput = { count: number }
export type SayHelloInput = { name?: string }
export type SayHelloOutput = { message: string; timestamp: number }
export type CalculateInput = {
  operation: 'add' | 'subtract' | 'multiply' | 'divide'
  a: number
  b: number
}
export type CalculateOutput = { result: number; operation: string }
export type GetStaticResourceOutput = { message: string }
export type GetUserInfoInput = { userId: string }
export type GetUserInfoOutput = {
  userId: string
  name: string
  email: string
  lastLogin: string
}
export type PikkuFn_src_mcp_functions_ts_L113C66Output = {
  role: 'user'
  content: { type: 'text'; text: string }
}[]
export type DynamicPromptGeneratorInput = {
  topic: string
  complexity: 'beginner' | 'intermediate' | 'advanced'
  includeExamples?: boolean
}
export type PikkuFn_src_mcp_functions_ts_L133C4Output = {
  role: 'user'
  content: { type: 'text'; text: string }
}[]
export type QueueWorkerInput = { message: string; fail: boolean }
export type QueueWorkerOutput = { result: string }
export type RpcTestInput = { in: number }

interface ChannelHandler<I, O> {
  input: I
  output: O
}

export type ChannelsMap = {
  readonly events: {
    readonly routes: {
      readonly action: {
        readonly auth: ChannelHandler<AuthenticateInput, AuthenticateOutput>
        readonly subscribe: ChannelHandler<SubscribeInput, never>
        readonly unsubscribe: ChannelHandler<UnsubscribeInput, never>
        readonly emit: ChannelHandler<EmitMessageInput, EmitMessageOutput>
      }
    }
    readonly defaultMessage: never
  }
  readonly 'progressive-enhancement': {
    readonly routes: {
      readonly action: {
        readonly status: ChannelHandler<
          void,
          ProgressiveEnhancementExampleOutput
        >
      }
    }
    readonly defaultMessage: never
  }
}

export type ChannelDefaultHandlerOf<Channel extends keyof ChannelsMap> =
  ChannelsMap[Channel]['defaultMessage'] extends {
    input: infer I
    output: infer O
  }
    ? ChannelHandler<I, O>
    : never

export type ChannelRouteHandlerOf<
  Channel extends keyof ChannelsMap,
  Route extends keyof ChannelsMap[Channel]['routes'],
  Method extends keyof ChannelsMap[Channel]['routes'][Route],
> = ChannelsMap[Channel]['routes'][Route][Method] extends {
  input: infer I
  output: infer O
}
  ? ChannelHandler<I, O>
  : never
